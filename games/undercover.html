<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Undercover - Social deduction party game">
    <meta name="theme-color" content="#EC4899">
    <title>Undercover - Meenit's Playground</title>

    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/undercover.css">
</head>

<body>
    <div class="game-container">

        <!-- SCREEN 1: Setup -->
        <div id="screen-setup" class="screen">
            <div class="screen-header">
                <img src="../images/Undercover Logo.png" alt="Undercover" class="game-logo">
            </div>

            <div class="content-card">
                <h2>Game Setup</h2>

                <!-- Player Count -->
                <div class="form-group">
                    <label class="label-white">Total Players</label>
                    <div class="number-input">
                        <button class="number-btn" id="decrease-players">‚àí</button>
                        <input type="number" id="player-count-input" value="6" min="4" max="15" readonly>
                        <button class="number-btn" id="increase-players">+</button>
                    </div>
                </div>

                <!-- Player Names -->
                <div class="form-group">
                    <label class="label-white">Player Names</label>
                    <div id="player-names-container"></div>
                </div>

                <!-- Role Distribution -->
                <div class="role-distribution">
                    <h3>Role Distribution</h3>

                    <div class="role-row-with-img">
                        <img src="../images/Mr. White.png" alt="Mr. White" class="role-icon">
                        <div class="role-info">
                            <span class="role-label">Mr. White</span>
                            <p class="role-desc">No word, must blend in</p>
                        </div>
                        <div class="number-input-small">
                            <button class="number-btn-small" id="decrease-mrwhite">‚àí</button>
                            <input type="number" id="mrwhite-count" value="1" min="1" max="3" readonly>
                            <button class="number-btn-small" id="increase-mrwhite">+</button>
                        </div>
                    </div>

                    <div class="role-row-with-img">
                        <img src="../images/Spy Agent.png" alt="Spy" class="role-icon">
                        <div class="role-info">
                            <span class="role-label">Spy</span>
                            <p class="role-desc">Gets different word</p>
                        </div>
                        <div class="number-input-small">
                            <button class="number-btn-small" id="decrease-spies">‚àí</button>
                            <input type="number" id="spies-count" value="2" min="1" max="5" readonly>
                            <button class="number-btn-small" id="increase-spies">+</button>
                        </div>
                    </div>

                    <div class="role-row-with-img">
                        <img src="../images/Agent.png" alt="Agent" class="role-icon">
                        <div class="role-info">
                            <span class="role-label">Agent</span>
                            <p class="role-desc">Majority with main word</p>
                        </div>
                        <span class="role-value" id="agents-count">3</span>
                    </div>
                </div>

                <button class="btn btn-primary btn-full btn-lg mt-xl" id="start-game-btn">Start Game</button>
            </div>

            <!-- Rules Section -->
            <div class="rules-section-footer">
                <h3>üìú How to Play</h3>
                <div class="rules-content">
                    <p><strong>Roles:</strong></p>
                    <ul>
                        <li><strong>Agents:</strong> Get Word 1. Find and eliminate Spies & Mr. Whites</li>
                        <li><strong>Spies:</strong> Get Word 2. Blend in and survive</li>
                        <li><strong>Mr. White:</strong> Gets NO word. Survive or guess both words if eliminated</li>
                    </ul>
                    <p><strong>Win Conditions:</strong></p>
                    <ul>
                        <li>Agents win: All Spies + Mr. Whites eliminated</li>
                        <li>Spies/Mr. White win: (Spies + Mr. Whites) ‚â• Agents</li>
                        <li>Mr. White solo win: Guess both words correctly</li>
                    </ul>
                </div>
            </div>

            <a href="../index.html" class="back-link">‚Üê Back to Games</a>
        </div>

        <!-- SCREEN 2: Pass-Phone Role Viewing -->
        <div id="screen-role-viewing" class="screen hidden">
            <div class="role-viewing-center">
                <h1 class="centered-title">Role Assignment</h1>

                <div class="pass-phone-box">
                    <p class="player-name-large" id="next-viewer-name">Player Name</p>
                </div>

                <button class="btn btn-primary btn-full btn-lg" id="reveal-role-btn">üëÅÔ∏è Reveal My Role</button>
            </div>
        </div>

        <!-- SCREEN 3: Role Card Display -->
        <div id="screen-role-card" class="screen hidden">
            <div class="role-card-container">
                <h1 class="centered-title">Your Role</h1>

                <div class="role-card">
                    <img src="../images/Agent.png" alt="Role" class="role-image" id="role-image">
                    <div class="word-display" id="word-display-card">
                        <p class="word-text" id="word-text">Escalator</p>
                    </div>
                </div>

                <button class="btn btn-primary btn-full mt-2xl" id="done-viewing-btn">Pass Phone to <span
                        id="next-player-name">Next Player</span></button>
            </div>
        </div>

        <!-- SCREEN 4: Word Rounds -->
        <div id="screen-word-round" class="screen hidden">
            <div class="game-round-header">
                <h1 class="centered-title">Round <span id="word-round-number">1</span></h1>

                <div class="speaking-order-section">
                    <h3>Speaking Order</h3>
                    <div id="speaking-order-list"></div>
                </div>
            </div>

            <div class="content-card">
                <div class="elimination-section">
                    <h3>Eliminate Player (Vote 1)</h3>
                    <div id="elimination-list"></div>
                </div>

                <button class="btn btn-success btn-full btn-lg mt-lg" id="next-word-round-btn" disabled>Confirm
                    Elimination</button>
            </div>
        </div>

        <!-- SCREEN 5: Mr. White Guess -->
        <div id="screen-mrwhite-guess" class="screen hidden">
            <div class="screen-header">
                <h1>Mr. White's Guess</h1>
                <p class="subtitle">Guess both words correctly to win!</p>
            </div>

            <div class="content-card">
                <p class="info-text">Mr. White has been eliminated. They can guess both words to win!</p>

                <div class="form-group">
                    <label>Guess Word 1</label>
                    <input type="text" id="guess-word1" placeholder="Enter first word" autocomplete="off">
                </div>

                <div class="form-group">
                    <label>Guess Word 2</label>
                    <input type="text" id="guess-word2" placeholder="Enter second word" autocomplete="off">
                </div>

                <button class="btn btn-primary btn-full" id="submit-guess-btn">Submit Guess</button>
                <button class="btn btn-ghost btn-full mt-sm" id="skip-guess-btn">Skip (Wrong Guess)</button>
            </div>
        </div>

        <!-- SCREEN 6: Winner Screen -->
        <div id="screen-winner" class="screen hidden">
            <div class="confetti-container" id="confetti-container"></div>

            <div class="winner-content">
                <div class="trophy-icon">üèÜ</div>
                <h1 class="winner-title" id="winner-title">Agents Win!</h1>
                <div class="winner-details">
                    <h3>Final Roles</h3>
                    <div id="role-reveals-list"></div>
                </div>

                <button class="btn btn-primary btn-lg mt-2xl" id="play-again-btn">Play Again</button>
                <a href="../index.html" class="btn btn-ghost btn-lg mt-md">Back to Games</a>
            </div>
        </div>

    </div>

    <!-- Rules Modal -->
    <div id="rules-modal" class="modal hidden">
        <div class="modal-content-rules">

            <h2>How to Play Undercover</h2>

            <div class="rules-section">
                <h3>üéØ Objective</h3>
                <ul class="rules-list">
                    <li><strong>Agents:</strong> Find and eliminate all Spies and Mr. Whites</li>
                    <li><strong>Spies:</strong> Blend in with Agents and survive</li>
                    <li><strong>Mr. White:</strong> Survive without knowing any word, OR guess both words if eliminated
                    </li>
                </ul>
            </div>

            <div class="rules-section">
                <h3>üë• Roles Explained</h3>

                <div class="role-explain">
                    <div class="role-explain-header">
                        <img src="../images/Agent.png" alt="Agent" class="role-explain-icon">
                        <strong>Agent (Majority)</strong>
                    </div>
                    <p>You get Word 1. You DON'T know you're an Agent! Find the Spies and Mr. Whites by listening to
                        clues.</p>
                </div>

                <div class="role-explain">
                    <div class="role-explain-header">
                        <img src="../images/Spy.png" alt="Spy" class="role-explain-icon">
                        <strong>Spy (Minority)</strong>
                    </div>
                    <p>You get Word 2. You DON'T know you're a Spy! Blend in and pretend you have the same word as the
                        majority.</p>
                </div>

                <div class="role-explain">
                    <div class="role-explain-header">
                        <img src="../images/Mr. White.png" alt="Mr. White" class="role-explain-icon">
                        <strong>Mr. White (Wildcard)</strong>
                    </div>
                    <p>You get NO WORD at all. You KNOW you are Mr. White. Blend in without knowing either word, or win
                        by guessing both if eliminated. You can volunteer to be eliminated if you figure out the words!
                    </p>
                </div>
            </div>

            <div class="rules-section">
                <h3>üèÜ Win Conditions</h3>
                <ul class="rules-list">
                    <li><strong>Agents Win:</strong> All Spies + Mr. Whites eliminated</li>
                    <li><strong>Spies/Mr. White Win:</strong> (Spies + Mr. Whites) ‚â• Agents<br><small>Example: 2 Spies +
                            1 Mr. White = 3, Agents = 2 ‚Üí Spies win!</small></li>
                    <li><strong>Mr. White Solo Win:</strong> Both words guessed correctly after elimination</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/utils.js"></script>
    <script src="../js/undercover.js"></script>
</body>

</html>