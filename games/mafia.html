<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Mafia - Classic social deduction game">
    <meta name="theme-color" content="#F97316">
    <title>Mafia - Meenit's Playground</title>

    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/mafia.css">
</head>

<body>
    <div class="game-container">
        <!-- Background Elements -->
        <div class="sky-elements">
            <div class="sun"></div>
            <div class="cloud cloud-1"></div>
            <div class="cloud cloud-2"></div>
        </div>

        <!-- SCREEN 1: Setup -->
        <div id="screen-setup" class="screen">
            <div class="screen-header">
                <img src="../images/Mafia Logo.png" alt="Mafia" class="game-logo">
                <h1 class="game-title">MAFIA</h1>
                <p class="game-subtitle">Trust No One, Survive the Night</p>

                <button class="rules-btn" id="open-rules-btn">
                    <span class="rules-icon">üìú</span> How to Play
                </button>
            </div>

            <div class="content-card">
                <div class="setup-section">
                    <div class="section-label">Players</div>
                    <div class="player-count-control">
                        <button class="count-btn" id="decrease-players">‚àí</button>
                        <span class="count-display" id="player-count-display">5</span>
                        <button class="count-btn" id="increase-players">+</button>
                    </div>
                </div>

                <div class="names-section">
                    <div class="section-label">Enter Names</div>
                    <div id="player-names-container" class="names-grid">
                        <!-- Dynamic: 5-15 inputs -->
                    </div>
                </div>

                <div class="roles-section">
                    <div class="section-label">Team & Roles</div>

                    <div class="role-selector-container">
                        <!-- Mafia -->
                        <div class="role-item">
                            <img src="../images/Mafia.png" alt="Mafia" class="role-img">
                            <div class="role-name">Mafia</div>
                            <div class="role-counter">
                                <button class="mini-btn" id="decrease-mafia">‚àí</button>
                                <span class="mini-count" id="mafia-count-display">1</span>
                                <button class="mini-btn" id="increase-mafia">+</button>
                            </div>
                        </div>

                        <!-- Doctor -->
                        <div class="role-item">
                            <img src="../images/Doctor.png" alt="Doctor" class="role-img">
                            <div class="role-name">Doctor</div>
                            <div class="role-counter">
                                <button class="mini-btn" id="decrease-doctor">‚àí</button>
                                <span class="mini-count" id="doctor-count-display">1</span>
                                <button class="mini-btn" id="increase-doctor">+</button>
                            </div>
                        </div>

                        <!-- Detective -->
                        <div class="role-item">
                            <img src="../images/Detective.png" alt="Detective" class="role-img">
                            <div class="role-name">Detective</div>
                            <div class="role-counter">
                                <button class="mini-btn" id="decrease-detective">‚àí</button>
                                <span class="mini-count" id="detective-count-display">0</span>
                                <button class="mini-btn" id="increase-detective">+</button>
                            </div>
                        </div>

                        <!-- Special Roles -->
                        <div class="role-item">
                            <img src="../images/Jester.png" alt="Jester" class="role-img">
                            <div class="role-name">Jester</div>
                            <div class="role-counter">
                                <button class="mini-btn" id="decrease-jester">‚àí</button>
                                <span class="mini-count" id="jester-count-display">0</span>
                                <button class="mini-btn" id="increase-jester">+</button>
                            </div>
                        </div>

                        <div class="role-item">
                            <img src="../images/Bomber.png" alt="Bomber" class="role-img">
                            <div class="role-name">Bomber</div>
                            <div class="role-counter">
                                <button class="mini-btn" id="decrease-bomber">‚àí</button>
                                <span class="mini-count" id="bomber-count-display">0</span>
                                <button class="mini-btn" id="increase-bomber">+</button>
                            </div>
                        </div>

                        <div class="role-item">
                            <img src="../images/Lover.png" alt="Lover" class="role-img">
                            <div class="role-name">Lover</div>
                            <div class="role-counter">
                                <button class="mini-btn" id="decrease-lover">‚àí</button>
                                <span class="mini-count" id="lover-count-display">0</span>
                                <button class="mini-btn" id="increase-lover">+</button>
                            </div>
                        </div>

                        <!-- Civilians (Auto) -->
                        <div class="role-item disabled">
                            <img src="../images/Civilian.png" alt="Civilian" class="role-img">
                            <div class="role-name">Civilians</div>
                            <div class="role-counter">
                                <span class="mini-count" id="civilian-count-display">3</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="btn-group">
                    <button class="btn btn-primary btn-full btn-lg" id="start-game-btn">Start Game</button>
                    <a href="../index.html" class="btn btn-ghost btn-full">Exit Game</a>
                </div>
            </div>
        </div>

        <!-- REST OF THE SCREENS STAY THE SAME -->

        <!-- SCREEN 2: Role Viewing (Pass Phone) -->
        <div id="screen-role-viewing" class="screen hidden">
            <div class="role-viewing-container">
                <h1 class="centered-title">Next Player</h1>
                <div class="pass-phone-card">
                    <p class="next-player-name" id="next-viewer-name">Player Name</p>
                    <div class="pass-instruction">Pass the phone to this player</div>
                </div>
                <button class="btn btn-primary btn-full btn-lg" id="reveal-role-btn">Reveal My Role</button>
            </div>
        </div>

        <!-- SCREEN 3: Role Card Display -->
        <div id="screen-role-card" class="screen hidden">
            <div class="role-card-display">
                <div class="role-card">
                    <div class="role-card-glow"></div>
                    <img src="../images/Civilian.png" alt="Role" class="reveal-role-img" id="role-image">
                    <h2 class="reveal-role-name" id="role-name">Civilian</h2>
                    <p class="reveal-role-desc" id="role-description">Find the Mafia and eliminate them!</p>
                </div>
                <button class="btn btn-primary btn-full btn-lg" id="done-viewing-btn">
                    Got it! Pass to <span id="next-player-name">Next</span>
                </button>
            </div>
        </div>

        <!-- SCREEN 4: Game Master Overview -->
        <div id="screen-gm-overview" class="screen hidden">
            <div class="screen-header">
                <h1 class="game-title">Game Master</h1>
                <p class="game-subtitle">Game setup complete. Here are all roles:</p>
            </div>
            <div class="content-card">
                <div id="all-roles-list" class="roles-summary-grid">
                    <!-- Dynamic: List of players and roles -->
                </div>
                <button class="btn btn-primary btn-full btn-lg mt-xl" id="start-night-btn">Begin Night 1</button>
            </div>
        </div>

        <!-- SCREEN 5: Night Phase -->
        <div id="screen-night" class="screen hidden">
            <div class="screen-header">
                <h1 class="phase-title">üåô Night <span id="night-round-number">1</span></h1>
                <p class="game-subtitle">Game Master: Read instructions aloud</p>
            </div>
            <div class="content-card">
                <div class="night-narration">
                    <ul id="night-order-list" class="narration-list">
                        <!-- Dynamic: Order of events -->
                    </ul>
                </div>

                <div id="lover-selection-container" class="hidden special-action-box">
                    <div class="action-label">üíñ Lover: Pick target to protect</div>
                    <div id="lover-target-list" class="action-grid"></div>
                </div>

                <button class="btn btn-primary btn-full btn-lg mt-xl" id="end-night-btn">Complete Night</button>
            </div>
        </div>

        <!-- SCREEN 6: Morning Results -->
        <div id="screen-morning-results" class="screen hidden">
            <div class="screen-header">
                <h1 class="phase-title">üå§Ô∏è Morning Outcomes</h1>
                <p class="game-subtitle">GM: Who was found dead?</p>
            </div>
            <div class="content-card">
                <p id="morning-announcement" class="announcement-text"></p>
                <div id="night-outcome-list" class="players-selection-list">
                    <!-- Dynamic: Alive players to pick victim -->
                </div>
                <button class="btn btn-primary btn-full btn-lg mt-xl" id="start-discussion-btn" disabled>Start
                    Discussion</button>
            </div>
        </div>

        <!-- SCREEN 7: Day Phase (Voting) -->
        <div id="screen-day" class="screen hidden">
            <div class="screen-header">
                <h1 class="phase-title">‚òÄÔ∏è Day Discussion</h1>
                <p class="game-subtitle">Round <span id="day-round-number">1</span> - Vote to eliminate</p>
            </div>
            <div class="content-card">
                <div id="alive-players-container" class="elimination-grid">
                    <!-- Dynamic: Checkboxes for voting -->
                </div>
                <div class="btn-group mt-xl">
                    <button class="btn btn-danger btn-full btn-lg" id="confirm-elimination-btn" disabled>Eliminate
                        Selected</button>
                    <button class="btn btn-ghost btn-full" id="skip-elimination-btn">Skip Voting</button>
                </div>
            </div>
        </div>

        <!-- SCREEN 8: Game Over -->
        <div id="screen-winner" class="screen hidden">
            <div id="confetti-container" class="confetti-container"></div>
            <div class="game-over-container">
                <h1 id="winner-title" class="winner-title">TEAM WINS!</h1>
                <div class="winner-card">
                    <div class="final-roles-title">Full Game Log</div>
                    <div id="final-roles-list" class="final-roles-list">
                        <!-- Dynamic: End game summary -->
                    </div>
                </div>
                <button class="btn btn-primary btn-full btn-lg" id="play-again-btn">New Game</button>
            </div>
        </div>

        <!-- Rules Modal -->
        <div id="rules-modal" class="modal hidden">
            <div class="modal-overlay" onclick="closeRules()"></div>
            <div class="modal-content">
                <h3>Mafia Rules</h3>
                <div class="rules-scrollable">
                    <!-- Rules summary -->
                </div>
                <button class="btn btn-primary btn-full" onclick="closeRules()">Close</button>
            </div>
        </div>

        <!-- Bomber Modal -->
        <div id="bomber-modal" class="modal hidden">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <h3>üí£ Bomber Revenge!</h3>
                <p>The Bomber takes someone with them. Pick a victim:</p>
                <div id="bomber-target-list" class="action-grid"></div>
            </div>
        </div>

        <div id="notification-banner" class="notification-banner hidden"></div>
    </div>

    </div>

    <!-- Elimination Modal -->
    <div id="elimination-modal" class="modal hidden">
        <div class="modal-content">
            <h3>Select Player to Eliminate</h3>
            <div id="elimination-player-list"></div>
            <button class="btn btn-ghost btn-full mt-md" id="cancel-elimination-btn">Cancel</button>
        </div>
    </div>

    <!-- Role Reveal Modal -->
    <div id="reveal-modal" class="modal hidden">
        <div class="modal-content text-center">
            <h2 id="reveal-player-name" class="mb-lg">Player Name</h2>
            <div class="reveal-card p-xl bg-white rounded-2xl shadow-xl inline-block mb-xl">
                <img id="reveal-role-img" src="../images/Civilian.png" alt="Role" class="role-image mx-auto mb-md">
                <h3 id="reveal-role-name" class="role-name h2 mb-0">Role Name</h3>
            </div>
            <p class="text-gray-600 mb-xl">has been eliminated!</p>
            <button class="btn btn-primary btn-full btn-lg" id="close-reveal-btn">Continue</button>
        </div>
    </div>

    <!-- Bomber Target Modal -->
    <div id="bomber-modal" class="modal hidden">
        <div class="modal-content">
            <h3>üí£ Bomber Activated!</h3>
            <p class="modal-text">The Bomber takes someone with them. Click the ‚ùå next to a target:</p>
            <div id="bomber-target-list"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/utils.js"></script>
    <script src="../js/mafia.js"></script>
</body>

</html>